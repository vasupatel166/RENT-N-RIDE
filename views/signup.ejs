<!DOCTYPE html>
<html lang="en">
  <%- include("layouts/head") %>

  <body>
    <%- include("layouts/nav") %>

    <!-- Main -->
    <main>
      <div class="login-container container">
        <div class="row">
          <div class="col-md-4 offset-md-4">
            <h2 class="text-center text-dark mt-1">Create new account</h2>
            <div class="signup-card card my-4">
              <form
                action="/signup"
                method="post"
                class="card-body cardbody-color p-lg-3"
              >
                <div class="text-center">
                  <img
                    src="/assets/img/signup-image.jpg"
                    class="img-fluid profile-image-pic img-thumbnail rounded-circle my-3"
                    width="200px"
                    alt="profile"
                  />
                </div>

                <!-- Form fields -->
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control"
                    id="admin_firstname"
                    name="admin_firstname"
                    value="<%= firstname %>"
                    placeholder="Firstname"
                  />
                </div>
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control"
                    id="admin_lastname"
                    name="admin_lastname"
                    value="<%= lastname %>"
                    placeholder="Lastname"
                  />
                </div>
                <div class="mb-3">
                  <input
                    type="email"
                    class="form-control"
                    id="admin_email"
                    name="admin_email"
                    value="<%= email %>"
                    aria-describedby="emailHelp"
                    placeholder="Email"
                  />
                </div>
                <div class="mb-3 position-relative">
                  <input
                    type="password"
                    class="form-control pe-5"
                    id="admin_password"
                    name="admin_password"
                    value="<%= password %>"
                    placeholder="Password"
                  />
                  <ion-icon
                    name="eye-outline"
                    class="eye-icon position-absolute p-2 end-0 top-50 translate-middle-y cursor-pointer"
                    id="togglePassword"
                  ></ion-icon>
                </div>

                <!-- Error message -->
                <div class="mb-3 text-center">
                  <% if (signup_error) { %>
                  <div class="text-start text-danger"><%= signup_error %></div>
                  <% } %>
                </div>

                <div class="text-center">
                  <button
                    type="submit"
                    class="login btn btn-color px-5 mb-4 w-100"
                  >
                    Register
                  </button>
                </div>
                <div
                  id="emailHelp"
                  class="form-text text-center mb-3 text-dark"
                >
                  Already Registered?
                  <a href="/login" class="text-dark fw-bold">Login</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer-->
    <%- include("layouts/footer") %>

    <!-- Scripts -->
    <%- include("layouts/script") %>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const togglePassword = document.querySelector("#togglePassword");
        const passwordField = document.querySelector("#admin_password");

        togglePassword.addEventListener("click", function () {
          const type =
            passwordField.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordField.setAttribute("type", type);

          // Toggle the eye icon
          const icon = this;
          if (icon.getAttribute("name") === "eye-outline") {
            icon.setAttribute("name", "eye-off-outline");
          } else {
            icon.setAttribute("name", "eye-outline");
          }
        });
      });
    </script>
  </body>
</html>
